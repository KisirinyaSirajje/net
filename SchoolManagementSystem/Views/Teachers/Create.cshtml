@model SchoolManagementSystem.Models.Teacher

@{
    ViewData["Title"] = "Add New Teacher";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h2><i class="fas fa-user-plus text-primary me-2"></i>Add New Teacher</h2>
                    <p class="text-muted mb-0">Create a new teacher profile</p>
                </div>
                <a asp-action="Index" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-1"></i>Back to Teachers
                </a>
            </div>
        </div>
    </div>

    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-chalkboard-teacher me-2"></i>Teacher Information
                    </h5>
                </div>
                <div class="card-body">
                    <form asp-action="Create" method="post" id="teacherForm">
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger d-none"></div>
                        
                        <div class="row g-3">
                            <!-- Personal Information -->
                            <div class="col-12">
                                <h6 class="text-muted border-bottom pb-2 mb-3">
                                    <i class="fas fa-user me-2"></i>Personal Information
                                </h6>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="FirstName" class="form-label">
                                    <i class="fas fa-user me-1"></i>First Name <span class="text-danger">*</span>
                                </label>
                                <input asp-for="FirstName" class="form-control" placeholder="Enter first name" />
                                <span asp-validation-for="FirstName" class="text-danger small"></span>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="LastName" class="form-label">
                                    <i class="fas fa-user me-1"></i>Last Name <span class="text-danger">*</span>
                                </label>
                                <input asp-for="LastName" class="form-control" placeholder="Enter last name" />
                                <span asp-validation-for="LastName" class="text-danger small"></span>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="Email" class="form-label">
                                    <i class="fas fa-envelope me-1"></i>Email Address <span class="text-danger">*</span>
                                </label>
                                <input asp-for="Email" class="form-control" type="email" placeholder="teacher@school.com" />
                                <span asp-validation-for="Email" class="text-danger small"></span>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="PhoneNumber" class="form-label">
                                    <i class="fas fa-phone me-1"></i>Phone Number
                                </label>
                                <input asp-for="PhoneNumber" class="form-control" placeholder="(555) 123-4567" />
                                <span asp-validation-for="PhoneNumber" class="text-danger small"></span>
                            </div>
                            
                            <div class="col-12">
                                <label asp-for="Address" class="form-label">
                                    <i class="fas fa-map-marker-alt me-1"></i>Address
                                </label>
                                <textarea asp-for="Address" class="form-control" rows="2" placeholder="Enter full address"></textarea>
                                <span asp-validation-for="Address" class="text-danger small"></span>
                            </div>

                            <!-- Employment Information -->
                            <div class="col-12 mt-4">
                                <h6 class="text-muted border-bottom pb-2 mb-3">
                                    <i class="fas fa-briefcase me-2"></i>Employment Information
                                </h6>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="EmployeeId" class="form-label">
                                    <i class="fas fa-id-badge me-1"></i>Employee ID <span class="text-danger">*</span>
                                </label>
                                <input asp-for="EmployeeId" class="form-control" placeholder="T-001" id="employeeIdInput" />
                                <span asp-validation-for="EmployeeId" class="text-danger small"></span>
                                <div class="form-text">
                                    <i class="fas fa-lightbulb me-1"></i>
                                    <span id="employeeIdSuggestion">Suggested: T-<span id="nextId">001</span></span>
                                </div>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="Department" class="form-label">
                                    <i class="fas fa-building me-1"></i>Department
                                </label>
                                <select asp-for="Department" class="form-select">
                                    <option value="">Select Department</option>
                                    <option value="Mathematics">Mathematics</option>
                                    <option value="Science">Science</option>
                                    <option value="English">English</option>
                                    <option value="History">History</option>
                                    <option value="Physical Education">Physical Education</option>
                                    <option value="Art">Art</option>
                                    <option value="Music">Music</option>
                                    <option value="Computer Science">Computer Science</option>
                                    <option value="Foreign Languages">Foreign Languages</option>
                                    <option value="Other">Other</option>
                                </select>
                                <span asp-validation-for="Department" class="text-danger small"></span>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="Specialization" class="form-label">
                                    <i class="fas fa-star me-1"></i>Specialization
                                </label>
                                <input asp-for="Specialization" class="form-control" placeholder="e.g., Algebra, Biology" />
                                <span asp-validation-for="Specialization" class="text-danger small"></span>
                            </div>
                            
                            <div class="col-md-6">
                                <label asp-for="YearsOfExperience" class="form-label">
                                    <i class="fas fa-clock me-1"></i>Years of Experience
                                </label>
                                <input asp-for="YearsOfExperience" class="form-control" type="number" min="0" max="50" placeholder="0" />
                                <span asp-validation-for="YearsOfExperience" class="text-danger small"></span>
                            </div>
                        </div>
                        
                        <div class="d-flex gap-3 mt-4 pt-3 border-top">
                            <button type="submit" class="btn btn-primary" id="submitBtn">
                                <i class="fas fa-save me-2"></i>Create Teacher
                            </button>
                            <a asp-action="Index" class="btn btn-outline-secondary">
                                <i class="fas fa-times me-2"></i>Cancel
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
.card {
    border-radius: 10px;
}

.card-header {
    border-radius: 10px 10px 0 0 !important;
}

.form-control:focus, .form-select:focus {
    border-color: #4e73df;
    box-shadow: 0 0 0 0.2rem rgba(78, 115, 223, 0.25);
}

.btn-primary {
    background: linear-gradient(45deg, #4e73df, #36b9cc);
    border: none;
}

.btn-primary:hover {
    background: linear-gradient(45deg, #3d5dc7, #2ea5b3);
    transform: translateY(-1px);
}

.form-text {
    font-size: 0.875rem;
}

#employeeIdSuggestion {
    color: #6c757d;
    cursor: pointer;
}

#employeeIdSuggestion:hover {
    color: #495057;
    text-decoration: underline;
}

.text-danger {
    font-weight: 500;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Generate suggested Employee ID
    const employeeIdInput = document.getElementById('employeeIdInput');
    const suggestionSpan = document.getElementById('employeeIdSuggestion');
    const nextIdSpan = document.getElementById('nextId');
    
    // Generate next available ID (you could enhance this to check existing IDs via AJAX)
    const generateNextId = () => {
        const timestamp = Date.now().toString().slice(-3);
        return timestamp.padStart(3, '0');
    };
    
    // Set initial suggestion
    nextIdSpan.textContent = generateNextId();
    
    // Click to use suggestion
    suggestionSpan.addEventListener('click', function() {
        employeeIdInput.value = 'T-' + nextIdSpan.textContent;
        employeeIdInput.focus();
    });
    
    // Form validation
    const form = document.getElementById('teacherForm');
    const submitBtn = document.getElementById('submitBtn');
    
    form.addEventListener('submit', function(e) {
        // Basic client-side validation
        const firstName = document.querySelector('[name="FirstName"]').value.trim();
        const lastName = document.querySelector('[name="LastName"]').value.trim();
        const email = document.querySelector('[name="Email"]').value.trim();
        const employeeId = document.querySelector('[name="EmployeeId"]').value.trim();
        
        if (!firstName || !lastName || !email || !employeeId) {
            e.preventDefault();
            alert('Please fill in all required fields.');
            return false;
        }
        
        // Add loading state
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Creating Teacher...';
        submitBtn.disabled = true;
    });
    
    // Auto-format phone number
    const phoneInput = document.querySelector('[name="PhoneNumber"]');
    if (phoneInput) {
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 6) {
                value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})(\d{0,3})/, '($1) $2');
            }
            e.target.value = value;
        });
    }
    
    // Character counter for specialization
    const specializationInput = document.querySelector('[name="Specialization"]');
    if (specializationInput) {
        specializationInput.addEventListener('input', function(e) {
            const maxLength = 100;
            const currentLength = e.target.value.length;
            
            // Find or create counter element
            let counter = e.target.parentNode.querySelector('.char-counter');
            if (!counter) {
                counter = document.createElement('div');
                counter.className = 'form-text char-counter';
                e.target.parentNode.appendChild(counter);
            }
            
            counter.textContent = `${currentLength}/${maxLength} characters`;
            counter.style.color = currentLength > maxLength ? '#dc3545' : '#6c757d';
        });
    }
});
</script>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}